<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>
    Title
  </title>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>


<script type="text/javascript">

  google.charts.load("current", {packages: ["timeline"]});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var container = document.getElementById('suman-test-timeline');
    var chart = new google.visualization.Timeline(container);
    var dataTable = new google.visualization.DataTable();

    dataTable.addColumn({type: 'string', id: 'Term'});
    dataTable.addColumn({type: 'string', id: 'Name'});
    dataTable.addColumn({type: 'date', id: 'Start'});
    dataTable.addColumn({type: 'date', id: 'End'});

    let tasksRaw = JSON.parse('[{"startDate":1512869711520,"endDate":1512869712091,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/1.test.js","status":"FAILED"},{"startDate":1512869711347,"endDate":1512869713315,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/2.test.js","status":"SUCCEEDED"},{"startDate":1512869710635,"endDate":1512869711588,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/3.test.js","status":"FAILED"},{"startDate":1512869710624,"endDate":1512869711549,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/4.test.js","status":"SUCCEEDED"},{"startDate":1512869710621,"endDate":1512869711549,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/5.test.js","status":"SUCCEEDED"},{"startDate":1512869710618,"endDate":1512869711543,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/6.test.js","status":"SUCCEEDED"},{"startDate":1512869710615,"endDate":1512869712281,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/events.test.js","status":"SUCCEEDED"},{"startDate":1512869710610,"endDate":1512869711558,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/injection.test.js","status":"SUCCEEDED"},{"startDate":1512869710607,"endDate":1512869711517,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/injection2.test.js","status":"FAILED"},{"startDate":1512869710604,"endDate":1512869711341,"transformStartDate":null,"transformEndDate":null,"taskName":"/Users/alexamil/WebstormProjects/oresoftware/sumanjs/suman/test/src/dev/node/simple.js","status":"SUCCEEDED"}]');

    let tasks = [];
    let colors = [];

    tasksRaw.forEach(function (t, i) {

      // we have two separate tasks per item, one for transform, one for run
      if (t.transformStartDate && t.transformEndDate) {
        tasks.push([
          String(i + 1),
          t.taskName,
          new Date(t.transformStartDate),
          new Date(t.transformEndDate),
        ]);
      }

      if (t.startDate && t.endDate) {

        if (t.status === 'FAILED') {
          colors.push('yellow');
        }
        else if (t.status === 'SUCCEEDED') {
          colors.push('green');
        }
        else {
          colors.push('blue');
        }

        tasks.push([
          String(i + 1),
          t.taskName,
          new Date(t.startDate),
          new Date(t.endDate)
        ]);
      }
    });

    dataTable.addRows(tasks);

    // dataTable.addRows([
    //   ['1', 'George Washington', new Date(1789, 3, 30), new Date(1797, 2, 4)],
    //   ['2', 'John Adams', new Date(1797, 2, 4), new Date(1801, 2, 4)],
    //   ['3', 'Thomas Jefferson', new Date(1801, 2, 4), new Date(1809, 2, 4)]
    // ]);

    var options = {
      colors: colors
      // timeline: { singleColor: '#8d8' },
    };

    chart.draw(dataTable, options);
  }


</script>

<div id="suman-test-timeline" style="height: 900px;"></div>

</body>
</html>
