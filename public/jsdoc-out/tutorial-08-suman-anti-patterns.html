<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Tutorial: Suman Anti-Patterns</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Tutorial: Suman Anti-Patterns</h1>

    <section>

<header>
    

    <h2>Suman Anti-Patterns</h2>
</header>

<article>
    <p>There are several anti-patterns when using Suman</p>
<ol>
<li><p>self/that. I am personally a fan of self/that usage. However, when using Suman, it is indeed an anti-pattern. If you notice that you
have used &quot;self&quot; or &quot;that&quot; instead of &quot;this&quot; to call something from the Suman API, then you should write your code to avoid the self pattern when using Suman. With arrow functions, you can
avoid the self/that pattern, when using functional loops for example. The reason to avoid self/that is that a reference to self/that might show up in a nested describe block and then
you may start registering test cases and hooks to the wrong block. You should always use &quot;this&quot; when calling this.describe/this.before/this.after etc, and you will be all good.</p>
</li>
<li><p>Putting code outside of and above <code>Test.describe</code> (the call that creates the root suite). As much code of your test code as possible should be inside the Test.describe callback.
There are several reasons for this. It makes it a bit easier to see the title of your suite. It also minimizes the 
amount of code loaded before a test suite is actually run. If you have a lot of code above your Test.describe call, it probably means you aren't using the 
Suman helper files effectively or correctly, (suman.ioc.js, suman.order.js, suman.hooks.js, etc).</p>
</li>
<li><p>Arrow functions, generator functions, or async/await for describe blocks. Arrow functions are useful for Suman, and they can be used everywhere except 
for describe blocks. This has to do with arrow functions binding the context for the callback to the wrong value. Describe blocks are designed to bind the callback to a new value (not the context of the current lexical scope), and to register
all API calls synchronously. Suman is designed to throw an exception if any library call is made after a describe block function has returned.</p>
</li>
<li><p>Nesting hooks and test cases. Describe blocks (aka child suites) are supposed to be nested! But hooks and test cases are not designed to be nested.
Suman will throw an error if you try to do it, whereas Mocha would let you errantly do it; see this issue:
https://github.com/mochajs/mocha/issues/1975, LOL, sorry Tom, wasn't me.</p>
</li>
</ol>
<ol>
<li>Using process.nextTick or setImmediate in hook / test callbacks</li>
</ol>
<pre class="prettyprint source lang-js"><code>
// not necessary to do this
this.it('not necesary', function(done){

       var c;
      if(c = condition()){
          c.doSomethingAsync().then(function(val){
               done(null,val)
          });
      }
      else{
        process.nextTick(done);   // no need to wrap in nextTick call
      }

});

// this is better
this.it('not necesary', function(done){
      var c;
           if(c = condition()){
               c.doSomethingAsync().then(function(val){
                    done(null,val)
               });
           }
      else{
        done();   // callign done in the same tick is just fine
      }

});</code></pre>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-01-getting-started.html">Getting Started with Suman</a></li><li><a href="tutorial-02-simple-examples.html">Simple Examples</a></li><li><a href="tutorial-03-high-level-overview.html">Higher Level Overview</a></li><li><a href="tutorial-04-command-line-options.html">Command line options</a></li><li><a href="tutorial-05-advanced-use.html">Advanced Use</a></li><li><a href="tutorial-07-suman-patterns-and-recipes.html">Suman Patterns and Recipes</a></li><li><a href="tutorial-08-suman-anti-patterns.html">Suman Anti-Patterns</a></li><li><a href="tutorial-09-suman-reporters.html">Suman reporters and creating custom reporters</a></li><li><a href="tutorial-11-advanced-installation.html">Advanced installation of Suman</a></li><li><a href="tutorial-12-using-suman-with-babel.html">Using Suman with Babel</a></li><li><a href="tutorial-13-test-dir-organization.html">13-test-dir-organization</a></li><li><a href="tutorial-14-debugging-suman.html">14-debugging-suman</a></li><li><a href="tutorial-15-testing-child-processes-with-suman.html">15-testing-child-processes-with-suman</a></li><li><a href="tutorial-16-using-spies-with-suman.html">16-using-spies-with-suman</a></li><li><a href="tutorial-17-suman-server-and-web-reporter.html">About Suman server and built-in web reporter</a></li><li><a href="tutorial-19-converting-from-mocha.html">Converting from Mocha to Suman</a></li><li><a href="tutorial-27-suman-best-practices.html">Best practices with Suman</a></li><li><a href="tutorial-30-anatomy-of-suman-suite.html">Anatomy of Suman Test Suites</a></li><li><a href="tutorial-31-workflows-with-suman.html">Workflows with Suman => Watchers and transpilation</a></li><li><a href="tutorial-40-integrating-with-ci-cd.html">Integrating with CI/CD</a></li><li><a href="tutorial-41-suman-exit-codes.html">List of Suman exit codes</a></li><li><a href="tutorial-50-suman-parallelism.html">Complete explanation of Suman parallelism</a></li><li><a href="tutorial-60-usage-with-gulp.html">Usage with Gulp.js</a></li><li><a href="tutorial-70-usage-with-code-coverage-tools.html">Usage with code coverage tools (namely Istanbul)</a></li><li><a href="tutorial-90-roadmap.html">Suman roadmap and upcoming efforts</a></li><li><a href="tutorial-99-faq.html">FAQ</a></li><li><a href="tutorial-advanced-parallelization-2.html">advanced-parallelization-2</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Mon Oct 17 2016 00:06:03 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>